{% extends 'Base.html' %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <section class="py-3">
        <div class="container">
          <div class="row">
            <div class="col-lg-6">
              <h3 class="mb-5">
                Latest PRODUCTS
              </h3>
            </div>
            <hr />
          </div>
          <div class="row"> 
    
            {% if products %}
    
              {% for product in products %}
            
                <div class="col-lg-3 col-sm-6">
                  <div class="card card-plain card-blog">
                    <div class="card-image border-radius-lg position-relative">
                      {% if product.img_main %}
                      <a href="{% url 'product_details' product.slug %}">
                        {% if product.img_main|first in 'http' %}
                        <img class="w-100 border-radius-lg move-on-hover shadow" 
                            src="{{product.img_main}}">
                        {% else %}
                        <img class="w-100 border-radius-lg move-on-hover shadow" 
                            src="data:image/png;base64,{{product.img_main}}">
                        {% endif %}
                      </a>
                      {% else %}
                      <a href="{% url 'product_details' product.slug %}">
                        <img class="w-100 border-radius-lg move-on-hover shadow" 
                            src="/static/products/{{ product.slug }}/card.jpg">
                      </a>
                      {% endif %}
                    </div>
                    <div class="card-body px-0">
                      <h5>
                        <a href="{% url 'product_details' product.slug %}" class="text-dark font-weight-bold">
                          {{ product.name }} - ${{ product.price }}
                        </a>
                      </h5>
                      <p>
                        {{ product.info }}
                      </p>
                      <a href="{% url 'product_details' product.slug %}" class="text-info icon-move-right">
                        See Product
                        <i class="fas fa-arrow-right text-sm"></i>
                      </a>
                    </div>
                  </div>
                </div>
              
              {% endfor %}
              <div class="col-lg-3 col-md-12 col-12">
                <div class="card card-blog card-background">
                  <div class="full-background" style="background-image: url('https://images.unsplash.com/photo-1554189097-ffe88e998a2b?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=934&q=80')"></div>
                  <div class="card-body">
                    <div class="content-left text-left my-auto py-4">
                      <a href="javascript:;">
                        <h2 class="card-title text-white">
                          Simple eCommerce App
                        </h2>
                        <p class="card-description text-white">
                          The products are loaded from static files (JSON format) and presented to the user using a modern UI Kit
                        </p>
                        <a target="_blank" href="https://github.com/app-generator/ecommerce-django-stripe"  
                           class="text-white icon-move-right">
                          Read More 
                          <i class="fas fa-arrow-right text-sm"></i>
                        </a>
                      </a>
                    </div>
                  </div>
                </div>
              </div>   
    
            {% else %}  
                
              <div class="col-lg-12 col-sm-12">
                <p class="lead">
    
                  {% if request.user.is_superuser %}
    
                    No products defined. <mark>Import <a href="{% url 'load_product' %}" class="text-primary">products</a> from Stripe.</mark>
                  
                  {% else %}
    
                    No products defined. <mark>Autenticate as <a class="text-primary" href="/admin/">superuser</a> to import products from Stripe.</mark>
    
                  {% endif %}
    
                </p>    
              </div>    
    
            {% endif %}
</body>
</html>